[gd_scene load_steps=5 format=3 uid="uid://wkjqrijamgh"]

[ext_resource type="Texture2D" uid="uid://p6utjqrntdkq" path="res://assets/images/hero.png" id="1_ejgm5"]
[ext_resource type="AudioStream" uid="uid://dap1fkj6cihyr" path="res://assets/sounds/steps.wav" id="3_42w1b"]

[sub_resource type="GDScript" id="GDScript_5512p"]
script/source = "extends CharacterBody2D

@onready var dialog_system = $\"../dialogSystem\"
@onready var steps = $steps
@onready var sprite_2d = $Sprite2D

const SPEED = 200.0
const JUMP_VELOCITY = -400.0

# Get the gravity from the project settings to be synced with RigidBody nodes.
var gravity = ProjectSettings.get_setting(\"physics/2d/default_gravity\")
var root: Node

func _ready():
	root = get_node(\"../..\")

func _physics_process(delta):
	# Add the gravity.
	if not is_on_floor():
		velocity.y += gravity * delta

	# Handle Jump.
#	if Input.is_action_just_pressed(\"ui_accept\") and is_on_floor():
#		velocity.y = JUMP_VELOCITY

	# Get the input direction and handle the movement/deceleration.
	if !dialog_system.is_active:
		var direction = Input.get_axis(\"left\", \"right\")
		if direction:
			velocity.x = direction * SPEED
			if !steps.playing:
				steps.play()
			if direction < 0:
				sprite_2d.flip_h = true
			elif direction > 0:
				sprite_2d.flip_h = false
		else:
			velocity.x = move_toward(velocity.x, 0, SPEED)
			steps.stop()

	move_and_slide()
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wnjjm"]
size = Vector2(27, 132)

[node name="player" type="CharacterBody2D"]
collision_layer = 2
collision_mask = 2
script = SubResource("GDScript_5512p")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-0.5, 0)
shape = SubResource("RectangleShape2D_wnjjm")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("1_ejgm5")

[node name="AudioListener2D" type="AudioListener2D" parent="."]
current = true

[node name="steps" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("3_42w1b")
volume_db = 11.243
